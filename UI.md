# UI Design Report: Tokyo Nightview Web V2

## 1. デザインコンセプト
「都会の夜景を探索する」をテーマとした、ダークモードを基調としたモダンなデザイン。
地図情報を主役にするため、UI要素は透過（Glassmorphism）とボケ（backdrop-blur）を多用し、浮遊感のある「アイランド型」のレイアウトを採用しています。

## 2. カラーパレット

| 種類 | カラー | 用途 |
| :--- | :--- | :--- |
| **プライマリ** | `Yellow-400` (#facc15) | 主要なアクションボタン（確定、投稿）、現在位置、アクティブなタブ、分析ルート。 |
| **セカンダリ** | `Blue-500` (#3b82f6) | 航空写真レイヤーの有効化状態など、補助的な情報。 |
| **バックグラウンド** | `Black` / `White/5` | 基本背景は黒。カードやボタンには透過度60%-80%の黒を使用。 |
| **アクセント/エラー**| `Red-500` (#ef4444) | 警告、エラーメッセージ、方位計（北方向）。 |
| **テキスト** | `White/90` | 基本テキスト。 |
| **デプロイ** | `White/50` | プレースホルダー、非アクティブなステップ。 |

## 3. 主要コンポーネント構成

| コンポーネント | 主な役割 | 特徴 |
| :--- | :--- | :--- |
| **TopBar** | 検索・モード切替 | 画面上部に浮遊。検索サジェストは最前面(`z-6000`)。モード切替はカプセル型。 |
| **LayerMenu** | 情報・設定の集約パネル | **モバイル**: 下部から引き出すシート。 **PC**: 左側に固定されるサイドパネル。 |
| **ScanControlPanel**| 地形分析制御 | スキャンモード（360°/扇形）の切替、`ProfileChart`による断面図表示。 |
| **LayerSettings** | レイヤー表示管理 | 夜間光(VIIRS)や航空写真のON/OFF。不透明度調整（現在は固定）。 |
| **MapOverlays** | 地図上の視覚要素 | `Deck.gl`を使用したVIIRSポイント、分析用レイ線の描画。 |
| **ActionButtons** | 操作用FAB | 右下にフローティング配置。投稿(`Camera`)、現在地(`LocateFixed`)。 |

## 4. 技術スタック
- **Vite + React (TypeScript)**: 高速な開発と型安全な実装。
- **Tailwind CSS**: ユーティリティファーストによる柔軟なスタイリング。
- **MapLibre GL JS**: 地図レンダリングエンジンの基盤。
- **Deck.gl**: 大規模データ（夜間光点群）のGPUレンダリング。
- **Lucide React**: シンプルで一貫性のあるアイコンセット。

## 5. レイアウト・レスポンシブ設計
- **Mobile First**: スマホでの片手操作を意識し、主要な操作（確定・現在地）を下部に配置。
- **Glassmorphism**: 
  - `bg-black/60` + `backdrop-blur-md`
  - `border-white/10` による繊細な縁取り
- **動的レイアウト**: 
  - 下部カードを開くと、地図上のボタン類が自動的に退避、または上方にスライドする仕組み。
  - 予測変換などの一時的な要素は高い z-index を持ち、他をオーバーレイする。

---
*最終更新: 2026年1月26日*
