# UI Design Report: Tokyo Nightview Web V2

## 1. デザインコンセプト
「都会の夜景を探索する」をテーマとした、ダークモードを基調としたモダンなデザイン。  
地図情報を主役にするため、UI要素は透過（Glassmorphism）とボケ（backdrop-blur）を多用し、浮遊感のある「アイランド型」のレイアウトを採用しています。

> V2では “夜に合う・派手すぎない” を優先し、アクセントを **Yellow中心 → Muted Violet中心** に変更します。  
> 紫はネオンではなく、**落ち着いた都会の灯り**として扱います。

---

## 2. カラーパレット（Muted Purple Theme）

| 種類 | カラー | 用途 |
| :--- | :--- | :--- |
| **プライマリ** | `Violet-700` (#6d28d9) | 主要なアクションボタン（確定、投稿）、現在位置、アクティブなタブ、分析ルート（主線）。※黄の置き換え。 |
| **セカンダリ（状態）** | `Slate-200/80`（近似: #e2e8f0） | “ON/選択中/有効” の弱い強調、補助ラベル、UIの状態表示。※主張を抑えたい箇所。 |
| **アクセント（淡）** | `Violet-300` (#c4b5fd) | フォーカスリング、ホバー、境界のハイライト、軽いバッジ。※発光というより「輪郭の色」。 |
| **補助（クール）** | `Blue-500` (#3b82f6) | 航空写真レイヤーの有効化など、地図レイヤー系の“別カテゴリ”の状態表示。※紫と競合しない用途に限定。 |
| **バックグラウンド** | `Black` / `White/5` | 基本背景は黒。カードやボタンには透過度60%-80%の黒を使用。 |
| **アクセント/エラー** | `Red-500` (#ef4444) | 警告、エラーメッセージ、方位計（北方向）。※危険色は紫に寄せず赤を維持。 |
| **テキスト** | `White/90` | 基本テキスト。 |
| **ディム（非アクティブ）** | `White/50` | プレースホルダー、非アクティブなステップ、補助説明文。 |

### 運用ルール（派手さを抑えるためのルール）
- **紫の面積を増やさない**：塗り（filled）は“主ボタン/選択中タブ/現在地/主線”のみに限定。
- **アクセント（淡い紫）は発光に使いすぎない**：基本は *枠・下線・フォーカスリング* として使用。
- グロー表現は最小限（必要なら `Violet-300` を低透明度で薄く）。
- Blueは “航空写真などレイヤー状態” だけ。UI全体のアクセントとしては使わない（色数を絞る）。

---

## 3. 主要コンポーネント構成

| コンポーネント | 主な役割 | 特徴 |
| :--- | :--- | :--- |
| **TopBar** | 検索・モード切替 | 画面上部に浮遊。検索サジェストは最前面(`z-6000`)。モード切替はカプセル型。アクティブ側は **Violet-700**。 |
| **LayerMenu** | 情報・設定の集約パネル | **モバイル**: 下部から引き出すシート。 **PC**: 左側に固定されるサイドパネル。選択状態は **Violet-700**、境界/フォーカスは **Violet-300**。 |
| **ScanControlPanel** | 地形分析制御 | スキャンモード（360°/扇形）の切替、`ProfileChart`による断面図表示。解析の主線は **Violet-700**、補助線は `White/20` を優先。 |
| **LayerSettings** | レイヤー表示管理 | 夜間光(VIIRS)や航空写真のON/OFF。不透明度調整（現在は固定）。航空写真ONは **Blue-500**（カテゴリ分離）。 |
| **MapOverlays** | 地図上の視覚要素 | `Deck.gl`を使用したVIIRSポイント、分析用レイ線の描画。強調が必要な点のみ **Violet-300〜Violet-700**。 |
| **ActionButtons** | 操作用FAB | 右下にフローティング配置。投稿(`Camera`)、現在地(`LocateFixed`)。主FABは **Violet-700**、サブはガラス背景＋白アイコン。 |

---

## 4. 技術スタック
- **Vite + React (TypeScript)**: 高速な開発と型安全な実装。
- **Tailwind CSS**: ユーティリティファーストによる柔軟なスタイリング。
- **MapLibre GL JS**: 地図レンダリングエンジンの基盤。
- **Deck.gl**: 大規模データ（夜間光点群）のGPUレンダリング。
- **Lucide React**: シンプルで一貫性のあるアイコンセット。

---

## 5. レイアウト・レスポンシブ設計
- **Mobile First**: スマホでの片手操作を意識し、主要な操作（確定・現在地）を下部に配置。
- **Glassmorphism**: 
  - `bg-black/60` + `backdrop-blur-md`
  - `border-white/10` による繊細な縁取り
- **動的レイアウト**: 
  - 下部カードを開くと、地図上のボタン類が自動的に退避、または上方にスライドする仕組み。
  - 予測変換などの一時的な要素は高い z-index を持ち、他をオーバーレイする。

---
*最終更新: 2026年1月26日*
